(this["webpackJsonponline-store"]=this["webpackJsonponline-store"]||[]).push([[0],{22:function(t,e,a){t.exports=a(38)},27:function(t,e,a){},28:function(t,e,a){},38:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(19),i=a.n(c),o=(a(27),a(1)),u=a(2),l=a(4),s=a(3),p=a(12),m=a(5),d=(a(28),a(7)),f=a.n(d),h=a(11);function v(){return y.apply(this,arguments)}function y(){return(y=Object(h.a)(f.a.mark((function t(){var e,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.mercadolibre.com/sites/MLB/categories");case 2:return e=t.sent,t.next=5,e.json();case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(t,e){return g.apply(this,arguments)}function g(){return(g=Object(h.a)(f.a.mark((function t(e,a){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e||a){t.next=2;break}throw new Error("Insira pelo menos um elemento");case 2:return t.next=4,fetch("https://api.mercadolibre.com/sites/MLB/search?category=".concat(e,"&q=").concat(a));case 4:return n=t.sent,t.next=7,n.json();case 7:return r=t.sent,t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(t){return O.apply(this,arguments)}function O(){return(O=Object(h.a)(f.a.mark((function t(e){var a,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.mercadolibre.com/items/".concat(e));case 2:return a=t.sent,t.next=5,a.json();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var j=a(15);function k(){return JSON.parse(localStorage.getItem("cart"))}function C(t){var e=k();if(e.some((function(e){return e.id===t.id}))){var a=e.find((function(e){return e.id===t.id}));a.available_quantity>a.count&&(a.count+=1),localStorage.setItem("cart",JSON.stringify(e))}else{t.count=1;var n=[].concat(Object(j.a)(e),[t]);localStorage.setItem("cart",JSON.stringify(n))}}function S(t,e){var a=k(),n=a.find((function(e){return e.id===t.id}));if(!e&&n.count>1)n.count-=1,localStorage.setItem("cart",JSON.stringify(a));else{var r=a.filter((function(e){return e.id!==t.id}));localStorage.setItem("cart",JSON.stringify(r))}}JSON.parse(localStorage.getItem("cart"))||localStorage.setItem("cart",JSON.stringify([]));var w,q,x,I=function(t){Object(l.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).onBtnClick=function(){C(t.props.itemObj)},t}return Object(u.a)(a,[{key:"render",value:function(){var t=this,e=this.props,a=e.productId,n=e.getCart,c=e.dataTestID;return r.a.createElement("div",null,r.a.createElement("button",{type:"button","data-testid":c,value:a,onClick:function(){t.onBtnClick(),n()}},"Adicionar ao carrinho"))}}]),a}(n.Component),B=function(t){Object(l.a)(a,t);var e=Object(s.a)(a);function a(){var t;return Object(o.a)(this,a),(t=e.call(this)).fetchApi=Object(h.a)(f.a.mark((function e(){var a,n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props,n=a.query,r=a.category,e.next=3,b(r,n);case 3:c=e.sent,t.setState({results:c.results});case 5:case"end":return e.stop()}}),e)}))),t.state={results:[]},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.fetchApi()}},{key:"render",value:function(){var t=this.state.results,e=this.props,a=e.empty,n=e.quantity,c=e.updateCart;return r.a.createElement("div",null,t.map((function(t){return r.a.createElement("section",{key:t.id},r.a.createElement(p.b,{to:"/product-details/".concat(t.id),"data-testid":"product-detail-link"},r.a.createElement("div",{"data-testid":"product"},r.a.createElement("img",{src:t.thumbnail,alt:t.title}),r.a.createElement("p",null,t.title),r.a.createElement("p",null,t.price),t.shipping.free_shipping&&r.a.createElement("p",{"data-testid":"free-shipping"},"Frete Gr\xe1tis"))),r.a.createElement(I,{productId:t.id,itemObj:t,itemsCart:C,empty:a,quantity:n,getCart:c,dataTestID:"product-add-to-cart"}))})))}}]),a}(n.Component),A=["svgRef","title"];function R(){return(R=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t}).apply(this,arguments)}function N(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},c=Object.keys(t);for(n=0;n<c.length;n++)a=c[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(n=0;n<c.length;n++)a=c[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var D=function(t){var e=t.svgRef,a=t.title,n=N(t,A);return r.a.createElement("svg",R({viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-shopping-cart",ref:e},n),a?r.a.createElement("title",null,a):null,w||(w=r.a.createElement("circle",{cx:9,cy:21,r:1})),q||(q=r.a.createElement("circle",{cx:20,cy:21,r:1})),x||(x=r.a.createElement("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})))},J=r.a.forwardRef((function(t,e){return r.a.createElement(D,R({svgRef:e},t))})),M=(a.p,function(t){Object(l.a)(a,t);var e=Object(s.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var t=this.props,e=t.quantity,a=t.empty;return r.a.createElement(p.b,{to:"/cart","data-testid":"shopping-cart-button"},r.a.createElement(J,{width:"50",alt:"Shopping Cart"}),a?r.a.createElement("p",{"data-testid":"shopping-cart-size"},"0"):r.a.createElement("p",{"data-testid":"shopping-cart-size"},e))}}]),a}(n.Component)),F=function(t){Object(l.a)(a,t);var e=Object(s.a)(a);function a(){var t;return Object(o.a)(this,a),(t=e.call(this)).updateCart=function(){var e=k().reduce((function(t,e){return e.count+t}),0);t.setState({quantity:e},(function(){e>0&&t.setState({cartIsempty:!1})}))},t.getAllCategories=Object(h.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:a=e.sent,t.setState({allCategories:a});case 4:case"end":return e.stop()}}),e)}))),t.onBtnClick=function(){t.setState({didRequest:!0})},t.onSearchChange=function(e){var a=e.target.value;t.setState({query:a})},t.handleChangeCategory=function(e){var a=e.target.value;t.setState({category:a,didRequest:!0})},t.state={query:"",category:"",didRequest:!1,allCategories:[],quantity:0,cartIsempty:!0},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getAllCategories(),this.updateCart()}},{key:"render",value:function(){var t=this,e=this.state,a=e.query,n=e.category,c=e.didRequest,i=e.allCategories,o=e.quantity,u=e.cartIsempty;return r.a.createElement("div",null,r.a.createElement("div",{id:"cart"},r.a.createElement(M,{empty:u,quantity:o})),r.a.createElement("div",{"data-testid":"home-initial-message"},r.a.createElement("p",null,"Digite algum termo de pesquisa ou escolha uma categoria."),r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"search"},r.a.createElement("input",{type:"text","data-testid":"query-input",onChange:this.onSearchChange,name:"search"})),r.a.createElement("button",{type:"button","data-testid":"query-button",onClick:this.onBtnClick},"Busca"))),c&&r.a.createElement(B,{query:a,category:n,empty:u,quantity:o,updateCart:this.updateCart}),r.a.createElement("ul",null,i.map((function(e){var a=e.name,n=e.id;return r.a.createElement("li",{key:n},r.a.createElement("label",{"data-testid":"category",htmlFor:n},r.a.createElement("input",{id:n,type:"radio",name:"category",value:n,onChange:t.handleChangeCategory}),a))}))))}}]),a}(n.Component),P=function(t){Object(l.a)(a,t);var e=Object(s.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(p.b,{to:"/finalPage"},r.a.createElement("button",{type:"button","data-testid":"checkout-products"},r.a.createElement("p",null,"Finalizar Compra")))}}]),a}(n.Component),z=function(t){Object(l.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={cart:[],cartIsempty:!0},t.updateCart=function(){var e=k();t.setState({cart:e},(function(){e.length>0&&t.setState({cartIsempty:!1})}))},t.verifyQuantity=function(t,e){return t<=e},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.updateCart()}},{key:"render",value:function(){var t=this,e=this.state,a=e.cart,n=e.cartIsempty;return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement(J,{width:"50"}),"- Carrinho de compras",r.a.createElement(P,null)),r.a.createElement("section",null,n?r.a.createElement("p",{"data-testid":"shopping-cart-empty-message"},"Seu carrinho est\xe1 vazio"):a.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("img",{src:e.thumbnail,alt:e.title}),r.a.createElement("h3",{"data-testid":"shopping-cart-product-name"},e.title),r.a.createElement("p",{"data-testid":"shopping-cart-product-quantity"},e.count),r.a.createElement("button",{"data-testid":"product-decrease-quantity",type:"button",value:e.id,onClick:function(){S(e,!1),t.updateCart()}},"-"),r.a.createElement("button",{"data-testid":"product-increase-quantity",type:"button",disabled:t.verifyQuantity(e.available_quantity,e.count),value:e.id,onClick:function(){C(e),t.updateCart()}},"+"),r.a.createElement("button",{type:"button",value:e.id,onClick:function(){S(e,!0),t.updateCart()}},"X"))}))))}}]),a}(n.Component),L=function(t){Object(l.a)(a,t);var e=Object(s.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var t=this.props,e=t.email,a=t.checkedRadioButton,n=t.comment,c=Object.entries(a).find((function(t){return t[1]}));return r.a.createElement("div",null,r.a.createElement("section",null,r.a.createElement("span",null,e),r.a.createElement("span",null,c?c[0]:""),r.a.createElement("span",null,n)))}}]),a}(n.Component);function T(t){localStorage.setItem("evaluation",JSON.stringify(t))}function Q(){return JSON.parse(localStorage.getItem("evaluation"))}var W=function(t){Object(l.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={email:"",comment:"",checkedRadioButton:{1:!1,2:!1,3:!1,4:!1,5:!1},commentsArray:[]},t.ratingButtonClick=function(e){e.preventDefault();var a={1:!1,2:!1,3:!1,4:!1,5:!1};t.setState((function(t){var e=t.commentsArray,n={checkedRadioButton:t.checkedRadioButton,email:t.email,comment:t.comment};return T([n].concat(Object(j.a)(e))),{commentsArray:[n].concat(Object(j.a)(e)),email:"",comment:"",checkedRadioButton:a}}))},t.selectRadioButton=function(e){var a={1:!1,2:!1,3:!1,4:!1,5:!1};a[e.target.value]=!0,t.setState({checkedRadioButton:a})},t.componentDidMount=function(){var e=Q();e&&t.setState({commentsArray:e})},t}return Object(u.a)(a,[{key:"render",value:function(){var t=this,e=this.state,a=e.email,n=e.comment,c=e.checkedRadioButton,i=e.commentsArray;return r.a.createElement("div",null,r.a.createElement("h2",null,"Avalia\xe7\xf5es"),r.a.createElement("form",null,r.a.createElement("input",{"data-testid":"product-detail-email",type:"email",placeholder:"Email",onChange:function(e){var a=e.target;return t.setState({email:a.value})},value:a}),Object.keys(c).map((function(e){return r.a.createElement("input",{"data-testid":"".concat(e,"-rating"),type:"radio",name:"rating",checked:c[e],value:e,onChange:t.selectRadioButton,key:e})})),r.a.createElement("textarea",{placeholder:"Mensagem (Opcional)","data-testid":"product-detail-evaluation",onChange:function(e){var a=e.target;return t.setState({comment:a.value})},value:n}),r.a.createElement("button",{"data-testid":"submit-review-btn",type:"submit",onClick:this.ratingButtonClick},"Avaliar")),r.a.createElement("div",null,i.map((function(t){return r.a.createElement(L,Object.assign({key:t.email},t))}))))}}]),a}(n.Component),_=function(t){Object(l.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={productInfo:{},quantity:0,empty:!0},t.updateCart=function(){var e=k().reduce((function(t,e){return e.count+t}),0);t.setState({quantity:e},(function(){e>0&&t.setState({empty:!1})}))},t.onBtnClick=Object(h.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.productInfo,e.next=3,C(a);case 3:case"end":return e.stop()}}),e)}))),t.fetchApi=function(){var e=Object(h.a)(f.a.mark((function e(a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.updateCart(),e.next=3,E(a);case 3:n=e.sent,t.setState({productInfo:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var t=this.props.match.params.productId;this.fetchApi(t)}},{key:"render",value:function(){var t=this,e=this.state,a=e.productInfo,n=e.empty,c=e.quantity;return r.a.createElement("div",null,r.a.createElement("div",{id:"cart"},r.a.createElement(M,{empty:n,quantity:c})),a.id?r.a.createElement("section",null,r.a.createElement("img",{src:a.thumbnail,alt:a.title}),r.a.createElement("h3",{"data-testid":"product-detail-name"},a.title),r.a.createElement("p",null,"R$ ".concat(a.price)),r.a.createElement(I,{productId:a.id,itemObj:a,itemsCart:C,empty:n,quantity:c,getCart:function(){t.updateCart()},dataTestID:"product-detail-add-to-cart"})):null,r.a.createElement(W,null))}}]),a}(n.Component),$=function(t){Object(l.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={cart:[]},t.updateCart=function(){var e=k();t.setState({cart:e})},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.updateCart()}},{key:"render",value:function(){var t=this.state.cart;return r.a.createElement("div",null,r.a.createElement("div",null,t.map((function(t){return r.a.createElement("div",{key:t.id},r.a.createElement("img",{src:t.thumbnail,alt:t.title}),r.a.createElement("h3",{"data-testid":"shopping-cart-product-name"},t.title),r.a.createElement("p",{"data-testid":"shopping-cart-product-quantity"},"Quantidade:",t.count))}))),r.a.createElement("form",null,r.a.createElement("input",{"data-testid":"checkout-fullname",type:"text",placeholder:"Nome"}),r.a.createElement("input",{"data-testid":"checkout-email",type:"email",placeholder:"Email"}),r.a.createElement("input",{"data-testid":"checkout-cpf",type:"text",placeholder:"CPF"}),r.a.createElement("input",{"data-testid":"checkout-phone",type:"text",placeholder:"Telefone"}),r.a.createElement("input",{"data-testid":"checkout-cep",type:"text",placeholder:"CEP"}),r.a.createElement("input",{"data-testid":"checkout-address",type:"text",placeholder:"Endere\xe7o"}),r.a.createElement("button",{"data-testid":"",type:"button"},"Finalizar Compra")))}}]),a}(n.Component),G=function(t){Object(l.a)(a,t);var e=Object(s.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(p.a,{basename:"/online-store"},r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/",component:F}),r.a.createElement(m.a,{path:"/cart",component:z}),r.a.createElement(m.a,{path:"/product-details/:productId",component:_}),r.a.createElement(m.a,{path:"/finalpage",component:$}))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.1c74381a.chunk.js.map